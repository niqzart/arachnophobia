<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:pf="http://primefaces.org/ui">
<body>
<ui:composition template="/views/template.xhtml">

  <ui:define name="title">Lab 3 | Main</ui:define>

  <ui:define name="scripts">
    <script src="/static/canvaser.js"></script>
    <script src="/static/validator.js"></script>
  </ui:define>

  <ui:define name="content">
    <table id="content">
      <tbody>
      <tr>
        <td>
          <h:form action="" method="POST">
            <fieldset>
              <p>Input the data</p>
              <span class="checkboxes var-p" id="x-p">
              <label>
                <span class="main-label">X:</span>
              </label>
              <c:forEach var="x" begin="0" end="8">
                <label>
                  <h:commandButton id="X#{x - 4}"
                                   value="#{x - 4}"
                                   action="#{mainBean.setX(x - 4)}">
                    <!--<f:ajax execute="@form" render="@form results"/>-->
                  </h:commandButton>
                  <span>Â </span>
                </label>
              </c:forEach>
            </span>
              <p id="y-p" class="var-p">
                <span class="main-label">Y:</span>
                <pf:inputText id="y-input"
                              type="text"
                              class="text-input"
                              maxlength="8"
                              value="#{mainBean.y}"
                              widgetVar="y-input"
                >
                  <f:validateDoubleRange minimum="-5" maximum="5"/>
                </pf:inputText>
              </p>
              <p id="r-p" class="var-p">
                <span class="main-label">R:</span>
                <pf:spinner id="r-input"
                            rotate="true"
                            stepFactor="0.1"
                            min="0.1"
                            max="3"
                            decimalSeparator="."
                            value="#{mainBean.r}"
                            widgetVar="x-input"
                >
                  <f:validateDoubleRange minimum="0.1" maximum="3"/>
                </pf:spinner>
              </p>
              <p>
                <pf:commandButton value="Submit"
                                  action="#{mainBean.addPoint}"
                                  widgetVar="submit-button"
                >
                  <!--
                  update="@form"
                  onsuccess="loadPointsFromTable()"
                  -->
                </pf:commandButton>
              </p>
              <p id="messages" style="visibility: hidden"/>
            </fieldset>
          </h:form>
        </td>
        <td>
          <canvas id="point-area" onclick="onClickCanvas()"/>
        </td>
      </tr>
      <tr>
        <td colspan="2" id="result-wrapper">
          <div id="result-container">
            <table id="result-table">
              <tbody>
              <tr>
                <th>X</th>
                <th>Y</th>
                <th>R</th>
                <th>Result</th>
              </tr>
              <c:forEach var="point" begin="0" end="80">
                <tr>
                  <th>#{point}</th>
                  <th>Y</th>
                  <th>R</th>
                  <th>Result</th>
                </tr>
              </c:forEach>
              <!--
                # HttpSession session = request.getSession(false);

                # int newRows = (int) session.getAttribute("new-rows");
                # ArrayList<Point> points = (ArrayList<Point>) session.getAttribute("points");
                # Collections.reverse(points);

              <c:forEach var="point" begin="0" end="8">
                <tr style="color: {newRows- - > 0 ? lime : white}">
                  <th>#{point.x}</th>
                  <th>#{point.y}</th>
                  <th>#{point.r}</th>
                  <th>#{point.inside}</th>
                </tr>
              </c:forEach>
              -->
              </tbody>
            </table>
          </div>
        </td>
      </tr>
      </tbody>
    </table>
  </ui:define>

</ui:composition>
</body>

</html>